# Data Modeling

## 데이터 모델링과 데이터 모델의 개념

현실 세계의 데이터를 컴퓨터 세계의 데이터베이스로 옮기는 작업은 결코 쉽지 않다. 현실 세계와 컴퓨터 세계는 근본적으로 많은 차이가 있고, 현실 세계에 존재하는 엄청난 양의 데이터중 필요한 데이터만 선별하려면 상당히 많은 고민과 결정이 필요하기 때문이다.

이러한 작업들을 추상화라고 한다. 추상화 과정을 통해 찾아낸 데이터를 실제 데이터베이스에 저장해야 되는데 데이터베이스에 저장하는 구조도 생각해야한다. 현실 세계에서 중요 데이터를 추출하여 개념 세계로 옮기는 작업을 데이터 모델링 과정 중에서도 개념적 모델링이라고 한다. 그리고 개념 세계의 데이터를 데이터베이스에 저장할 구조를 결정하고 이 구조로 표현하는 작업을 논리적 모델링 이라고 한다. 일반적으로는 구분하지 않고 합쳐서 데이터 모델링이라고 한다.

데이터 모델은 데이터 모델링의 결과물을 표현하는 도구로, 개념적 데이터 모델과 논리적 데이터 모델이 있다.

개념적 데이터 모델은 사람의 머리로 이해할 수 있도록 현실 세계를 개념적으로 모델링하여 데이터베이스를 개념적으로 표현하는 도구이다. 논리적 모델은 개념적 구조를 논리적 모델링하여 데이터베이스의 논리적 구조로 표현한는 도구이다.

일반적으로 데이터 모델은 데이터 구조, 연산, 제약 조건으로 구성된다. 데이터 모델에서는 보통 데이터 구조를 강조하지만, 적용 가능한 연산과 제약 조건도 이해할 필요가 있다.

개념적 모델에서 데이터 구조는 현실 세계를 개념 세계로 추상화 했을 때 어떤 요소로 이루여져 있는지를 표현하는 개념적 구조이다. 그리고 논리적 모델에서 데이터 구조는 데이터를 어떤 모습으로 저장할 것인가를 표현하는 논리적 구조이다. 보통 데이터 구조는 자주 변하지 않고 정적이라는 특징이 있다. 연산은 데이터 구조에 따라 개념 세계나 컴퓨터 세계에서 실제로 표현된 값들을 처리하는 작업으로, 값이 연산에 의해 계속 변경될 수 있으므로 동적이라는 특징이 있다.

개념적 데이터 모델 중 대표적으로 많이 사용되는 것이 개체-관계 모델 Model:Entity-Relationship model이다. 논리적 데이터 모델로는 관계 데이터 모델이 가장 많이 사용된다.

## E-R model

개체 관계 모델은 피터첸이 76년에 제안한 것으로, 개체와 개체 간의 관계를 이용해 현실 세계를 개념적 구조로 표현하는 방법이다. 현실 세계를 개체-관계 모델을 이용해 개념적으로 모델링하여 그림으로 표현한 것을 개체-관계 다이어그램 또는 E-R다이어그램이라 한다.

**개체**
개체는 현실 세계에서 조직을 운영하는데 꼭 필요한 사람이나 사물과 같이 구별되는 모든 것을 의미한다. 즉 개체는 저장할 만한 가치가 있는 중요 데이터를 가지고 있는 사람이나 사물등이며, 개념적 모델링을 하는데 가장 중요한 요소이다. 개체는 사람과 사물처럼 물리적으로 존재하는 것만을 의미하지는 않는다. 개념이나 사건처럼 개념적으로만 존재하는 것도 개체가 될 수 있다. 예를 들어 학교 운영에 필요한 데이터를 가지고 있는 학과나 과목이 물리적으로 존재하지 않지만 반드시 필요한 개념이기 때문에 개체가 될 수 있다.

개체는 다른 개체와 구별되는 이름을 가지고 있고, 각 개체만의 고유한 특성이나, 상태 즉 속성을 하나 이상 가지고 있다. 개체를 고유의 이름과 속성들로 정의한 것을 개체 타입이라고 한다.
개체를 구성하고 있는 속성이 실제 값을 가짐으로써 실체화된 개체를 개체 인스턴스또는 개체 어커런스라고한다. 특정 개체 타입에 대한 개체 인스턴스들을 모아 놓은 것을 개체 집합이라고 한다. 데이터베이스에서 실제로 저장하고 관리하는 것이 이 개체 인스턴스들의 모임인 개체 집합이라고 할 수 있다.

개체와 속성은 파일 구조에서 레코드와 필드 용어에 대응된다. 그리고 개체 타입은 레코드 타입에 개체인스턴스는 레코드 인스턴스에 대응된다. E-R다이어 그램에서는 개체를 사각형으로 표현하고 사각형 안에 개체의 이름을 표기한다.

**속성**
속성은 개체가 가지고 있는 고유의 특성이다. 속성은 그 자체만으로는 의미가 없지만 관련 있는 속성들을 모아 개체를 구성하면 하나의 중요한 의미를 표현할 수 있다. 속성은 일반적으로 의미있는 데이터의 가장 작은 논리적 단위로 인식된다.
E-R 다이어그램에서 속성은 타원으로 표현하고, 타원 안에 속성의 이름을 표기한다.
특정 개체를 구성하는 속성의 값이 하나면 단일값 속성으로 분류한다. 예를 들어 고객 개체를 구성하는 이름 적립금등의 속성은 한 명의 고객 인스턴스에 대해 하나의 값만 가지므로 단일 값 속성이다.
이와 달리 속성이 값을 여러개 가질 수 있으면 다중 값 속성이라고 한다. 고객 개체를 구성하는 연락처 송성은 한명의 고객 인스턴스에 대해 집번호와 휴대폰 번호등의 값을 가질 수 있으므로 다중 값 속성이다. 책 개체를 구성하는 저자 속성도 한권의 책 인스턴스에 저자가 여러명 일 수 있기 때문에 다중값으로 분류한다.
다중값 속성은 E-R 다이어그램에서 이중 타원으로 표현한다.

단순 속성과은 의미를 더는 분해할 수 없는 속성이다. 즉 단순 속성의 값은 의미가 하나이다. 고객 개체를 구성하는 적립금 속성은 의미가 더는 분해되지 않기 때문에 단순 속성이 된다. 책 개체를 구성하는 이름 ISBN 가격등의 속성도 의미를 나눌 수 없으므로 단순 속성으로 분류한다.

반면에 복합 속성은 의미를 분해할 수 있어 값이 여러개의 의미를 포함한다. 고객 개체를 구성하는 주소 속성은 도.시.동.우편번호등으로 의미를 나눌 수 있다. 고객 개체의 생년월일 속성도 년월일로 의미를 세분화 할수 있으므로 복합 속성이다. 복합 속성은 단순 속성이 여러개 모여 만들어진 속성으로 볼 수 있다. 하지만 일반적으로 주소나 생년월일 속성은 값을 전체 단위로 입력하거나 검색하고, 의미를 세부적으로 나누지 않는다. 그러므로 주소나 생년월일 속성은 하나의 단순 속성으로 처리하는 것도 괜찮다.

유도 속성은 값이 별도로 저장되는 것이 아니라 기존의 다른 속성 값에서 유도되어 결정되는 속성을 유도 속성이라고 한다. 책 개체를 구성하는 가격과 할인률 속성으로 계산되는 판매 가격 속성이 유도 속성이다. 그리고 판매 가격 속성을 계산하는데 사용되는 가격과 할인률 같은 속성을 저장 속성이라고 한다. 저장 속성인 출생년도에서 나이 속성을 유토하는 것도 이예에 속한다. 실제로 값을 저장하고 있는 것은 저장 속성이고 유도 속성은 필요할 때마다 계산되므로 값을 따로 저장할 필요가 없다.

유도 속성은 E-R다이어그램에서 점선 타원으로 표현한다.

널 값은 데이터베이스에서 여러가지로 중요한 의미를 지니므로 명확하게 이해해야한다. 널 값은 아직 결정되지 않았거나 모르는 값이다. 또는 해당되는 값이 없는 즉 존재하지 않는 값의 경우도 널 값이라고 한다. 이처럼 널 값은 값을 아직 갖지 않는 것이므로 공백이나 0과는 다르다.
널 값이 허용되는 속성을 널 속성이라고 한다. 한명의 고객 개체 인스턴스의 등급속성 값이 널이라면 고객의 등급이 아직 결정되지 않았음을 의미한다. 또 고객 개체 인스턴스의 취미 속성이 널 값이라면 가입시 고객이 취미를 입력하지 않았음을 의미한다. 다른 에로, 사원 개체를 구성하는 병역 속성은 사원 개체 인스턴스의 성별이 여자인 경우에는 해당 사항이 없으므로 널 값을 가질 수 밖에 없다.

개체를 구성하는 속성들 중에서 특별한 역할을 하는 속성이 있는데 바로 키속성이다. 모든 개체 인스턴스의 키 속성 값이 다르므로 키 속성은 개체 집합에 존재하는 각 개체 인스턴스를 식별하는데 사용한다. 고객 개체의 고객 아이디 속성은 고객마다 다르기 때문에 고객 아이디가 고객 개체의 키 속성이 될 수 있다. 책 개체에서는 ISBN속성이 키 속성으로 사용될 수 있다. 키 속성은 간단히 키라고도 한다. 개체 타입을 정의할 때 중요한 제약조건은 키 속성의 값이 개체 인스턴스마다 달라서 이 값으로 개체 인스턴스를 식별할 수 있어야 한다는 것이다. 만약 키 속성으로 적합한 속성이 여러개면 이중 하나를 키로 사용하면 된다.
E-R다이어그램에서 키는 밑줄을 그어 사용한다.

**관계**
관계는 개체와 개체가 맺고 있는 의미있는 연관성으로 개체-관계 모델의 중요한 요소다. 관계는 개체 집합들 사이의 대응관계, 즉 매핑을 의미한다. 업무 처리에 대한 요구 사항을 개체들을 이용해 하나의 문장으로 만들었을 때 동사에 해당하는 것이 관계이다. 관계를 여러 개체 사이에서 정의되는 관계 타입과 실제 속성 값으로 구성되어 있는 특정 개체 인스턴스들 간에 맺어진 실제 관계인 관계 인스턴스로 구분하여 표현하기도 한다.고객 개체와 책 개체 사이에 정의된 구매 관계는 관계 타입이 된다. 그리고 이름 속성의 값이 정소화인 고객 개체 인스턴스와 제목 속성의 값이 데이터베이스 개론인 책 개체 인스턴스 사이에 맺어진 실제관계는 관계 인스턴스가 되는 것이다. 관계도 개체처럼 속성을 가질 수 있다. 관계를 맺음으로써 발생하는 중요한 데이터들이 관계의 속성이 된다. 고객이 책을 구매하면 발생하는 구매일자, 결제 방식등이 구매 관계의 속성이 될 수 있다.
관계는 E-R다이어그램에서 마름모로 표현한다.

관계도 다양한 기준에 따라 분류할 수 있다. 먼저 관계에 참여하는 개체 타입의 수를 기준으로 이항, 삼항, 순환 관계등으로 나눌 수 있다. 이항 관계는 개체 타입 두개가 맺는 관계이고, 삼항관계는 개체 타입 세개가 맺는 관계이다.
관계의 분류 기준은 매핑 원소수, 즉 매핑 카디널리티이다. 매핑 카디널리티는 관계를 맺는 두 개체 집합에서 각 개체 인스턴스가 연관성을 맺고 있는 상대 개체 집합의 인스턴스 개수를 의미한다.

**1대1**
개체 A의 각 개체 인스턴스가 개체 B의 개체 인스턴스 하나와 관계를 맺을 수 있고 개체 B의 각 개체 인스턴스도 개체 A의 개체 인스턴스와 하나의 관계를 맺을 수 있다면 두 개체의 관계는 일대일이다.

**1대n관계**
예를 들어서 같은 부서 개체와 사원 개체 사이의 소속 관계

**다대다관계**
고객 개체와 책 개체 사이의 관계

두 개체의 관계에서 개체 1이 모든 개체 인스턴스가 관계에 반드시 참여한다면 개체 1이 관계에 필수적 참여한다또는 전체 참여한다라고 말한다. 그리고 개체 1의 개체 인스턴스 중 일부만 관계에 참여하면 1이 관계에 선택적 참여한다 또는 부분적 참여한다라고 한다. 예를 들어 고객 개체와 책 개체 사이의 구매 관계에서 모든 고객이 책을 반드시 구매해야 한다는 제약 조건이 존재한다면, 고객 개체가 구매 관계에 필수적 참여한다고 할 수 있다. 필수적 참여 관계는 ER다이어그램에서 두줄 선으로 표현한다.

**관계의 종속성**
이번에는 직원 개체와 부양가족 개체 사이의 부양 관계를 살펴보자.
회사에 새로운 직원이 입사하면 해당 직원의 부양 가족에 대한 데이터도 함께 저장하지만, 직원이 퇴사하면 퇴사한 직원의 부양가족 데이터도 함께 삭제한다. 그러므로 직원 개체가 강한 개체이고 부양가족 개체는 약한개체가된다.

강한 개체와 약한개체는 일반적으로 일대 다의 관계이며, 약한 개체는 강한 개체와의 관계에 필수적으로 참여한다는 특징이 있다. 약한 개체는 자신이 지닌 속성만으로는 식별이 어려워 일반적으로 강한 개체의 키를 포함하여 키를 구성한다.

## 논리적 데이터 모델

개체-관계 모델은 현실 세계를 사람들의 머릿속에 그릴 수 있는 개념적인 구조로 모델링하는데 사용하므로 어떤 데이터베이스 관리 시스템으로 데이터베이스를 구축하든 상관이 없다. 하지만 ER다이어그램으로 표현된 개념적인 구조를 데이터베이스에 표현하는 형태를 결정하는 논리적인 데이터 모델링에서는 데이터베이스 관리 시스템 종류가 중요하다. 선택한 데이터베이스 관리 시스템에 따라 사용자 입장에서 ER 다이어그램으로 표현된 개념적 구조를 데이터베이스에 저장할 형태로 표현할 논리적인 구조를 논리적 데이터 모델이라고 한다. 쉽게 말해서 논리적 데이터 모델은 논리적 데이터 모델링의 결과물이고, 사용자가 생각하는 데이터베이스의 모습또는 구조이다. 그리고 논리적 데이터 모델로 표현된 데이터베이스의 논리적 구조가 스키마이다. 논리적 구조는 사용하는 데이터베이스 관리 시스템에 따라 달라진다.

**계층 데이터 모델**
계층 데이터모델은 데이터베이스의 논리적 구조가 트리이다. 계층 데이터 모델은 다대다 관계를 직접적으로 표현할 수 없어서 별도의 개체를 추가로 생성하여 이를 표현한다. 트리이기 때문에 사이클이 존재하지 않는다. 그리고 일대다 관계를 맺은 개체들 사이에는 상하 관계가 성립한다. 상위에 있는 개체를 부모개체, 하위에있는 개체를 자식 개체라고하고, 이들 사이의 일대다 관계를 부모 자식 관계라고 한다. 계층 데이터 모델에서는 트리 구조의 특성상 부모 개체 하나가 자식 개체를 여러개 가질 수 있지만 모든 자식 개체는 부모 개체를 하나만 가질수 있다는 제약이 존재한다.
√
